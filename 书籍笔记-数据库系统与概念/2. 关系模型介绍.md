# 2. 关系模型介绍
## 2.1.关系数据库的结构
- 关系、元组与属性
关系数据库由表（table）的集合构成，在关系模型中有三个术语
  - **关系**relation：表
  - **元组**tuple：表的行
  - **属性**attribute：表的列
  - **关系实例**relation instance：一个关系的特定实例，即包含的一组特定的行
- **域**domain：关系的每个属性的允许取值的集合
  - **原子**atomic：要求所有属性的域都是原子的，即**不可再分**
- **空**null值：空值表示未知或不存在，尽量避免使用空值

## 2.2.数据库模式
- 数据库模式与数据库实例
  - **数据库模式**（database schema）：数据库的逻辑设计
  - **数据库实例**（database instance）：给定时刻数据库中数据的一个快照
- 关系模式与关系实例
  - **关系**：程序设计语言中的变量；
  - **关系模式**（relation schema）：程序语言中类型定义，一般由**属性序列**和**属性对应域**组成
    - 例：department(dept_name,building,budget)
    - 不同的关系模式中可能出现相同的属性（如dept_name出现在instructor模式和department模式中），这正是将不同关系的元组联系起来的一种方法
  - **关系实例**（relation instance）：程序语言中变量的值

## 2.3.码
> 一个元组的属性值必须是能够唯一区分元组的，即一个关系中没有两个元组在所有属性上的取值都相同。
- **超码**superkey
  - 定义：是一个或多个属性的集合，可以唯一的标识一个元组
  - 超码的任意超集都是超码
  - 例：instructor的ID是超码，name不是超码，因为教师可能重名
- **候选码**candidate key
  - 定义：超码K的任意真子集都不能成为超码，这样的最小**超码**即为候选码
- **主码**primary key
  - 定义：被数据库设计者选中的，主要用来在一个关系中区分不同元组的**候选码**。
  - 主码的选择需要慎重，应该选择哪些值从不变化或者极少变化的属性，如SSN
- **外码**foreign key
  - 定义：一个关系模式r1可能在其属性中包含另一个关系模式r2的主码，这个属性在r1上称作参照r2的外码
  - 参照关系referencing relaito：关系r1
  - 被参照关系referenced relation：关系r2
- **参照完整性约束**referential integrity constraint
  - **参照关系**中**任意**元组在特定属性上的取值必然等于**被参照关系**中**某个**元组在特定属性上的取值。

## 2.4.模式图
> 一个含有主码和外码以来的数据库模式可以用模式图（schema diagram）来表示。
- 外码依赖：从参照关系的外码属性到被参照关系的主码属性之间的箭头表示。

## 2.5.关系查询语言
- 查询语言 query language
  - 定义：是用户用来从数据库中请求获取信息的语言
  - 分类：过程化与非过程化
    - **过程化语言** procedural language
    用户指导系统对数据库执行一系列操作以计算出所需结果
    - **非过程化语言** nonprocedural language
    用户只需描述所需信息，而不用给出获取该信息的具体过程

## 2.6.关系代数
> 关系代数relational algebra提供了一组运算，以一个或者多个关系为输入，返回一个关系为输出
- **选择** σ
  - **定义**：返回输入关系中满足谓词的行
  - **例**：返回所有salary>50000美元的老师
- **投影** ∏
  - **定义**：对输入关系的所有行输出指定的属性，从输出中去除重复元组
  - **例**：返回只列出教师ID和工资的instructor关系
- **自然连接** ⋈
  - **定义**：从两个输入关系中输出这样的元组对：他们在具有相同名字的所有属性上取值相同
  - **例**：把instructor关系中的每个元组和department关系中对应于教师所在系的元组合并
- **笛卡尔积** x
  - **定义**：从两个输入关系中输出所有的元组对（无论他们在共同属性上的取值是否相同）
- **并** ∪
  - **定义**：输出两个输入元素中元组的并
  - **例**：输出所有instructor和student的name

## 2.7.总结
- 关系数据库：关系，元组，属性
- 关系模式与关系实例
- 超码，候选码，主码，外码
- 参照完整性约束
- 模式图
- 关系查询语言
- 关系代数
