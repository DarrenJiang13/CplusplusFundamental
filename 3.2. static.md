# 3.2 static
## static作用主要有三个： 
1. 扩展生存期：  
        声明为static的局部变量的生存期不再是当前作用域，而是整个程序的生存期。

2. 限制作用域：  
    普通全局变量和static全局变量，其存储区都是静态存储区。  
    - 但是**普通的全局变量和函数**，其**作用域**为**整个程序或项目**，外部文件（其它cpp文件）可以通过extern关键字访问该变量和函数（不提倡）。  

        ```c++  
        //在头文件里声明为extern：  
        extern int g_value; // 注意，不要初始化值  

        //然后在其中任何一个包含该头文件的cpp中初始化（一次）就好：
        int g_value = 0;     // 初始化一样不要extern修饰，因为extern也是声明性关键字；  

        //然后所有包含该头文件的cpp文件都可以用g_value这个名字访问相同的一个变量；
        ```    
    - **static全局变量和函数**，其**作用域**为**当前cpp文件**，其它的cpp文件不能访问该变量和函数。

3. 唯一性:  
    表示属于一个类而不是属于此类的任何特定对象的变量和函数。  
    比如在对某一个类的对象进行计数时, 计数生成多少个类的实例。因为它是对整个类来说是唯一的, 因此不可能属于某一个实例对象的.   

## 修饰范围：
- 修饰**普通变量**：  
    - 修改变量的存储区域和生命周期，使变量存储在**静态区**
    - 在 main 函数运行前就分配了空间 
    - 如果有初始值就用初始值初始化它，如果没有初始值系统用默认值初始化它。
- 修饰**普通函数**：
    - 表明函数作用范围，仅在定义该函数的文件内才能使用
    - 可用于多人开发项目时防止与他人命名空间里的函数重名
- 修饰**成员变量**：
    - 使所有的对象只保存一个该变量
    - 不需要生成对象就可以访问该成员。  

        **在类内声明成员变量**:
        ```c++
        class Student{
        public:
            Student(char *name, int age, float score);
            void show();
        public:
            static int m_total;  //静态成员变量
        private:
            char *m_name;
            int m_age;
            float m_score;
        };
        ```
        **static 成员变量必须在类声明的外部初始化**：
        ```c++
        int Student::m_total = 0;
        ```
        同时static 成员变量的内存是在（类外）初始化时分配。反过来说，没有在类外初始化的static成员变量不能使用。

        **static成员变量访问**(以下三种方法等效)：
        ```c++
        //通过类访问 static 成员变量
        Student::m_total = 10;
        //通过对象来访问 static 成员变量
        Student stu("小明", 15, 92.5f);
        stu.m_total = 20;
        //通过对象指针来访问 static 成员变量
        Student *pstu = new Student("李华", 16, 96);
        pstu -> m_total = 20;
        ```
- 修饰**成员函数**：
    - 不需要生成对象就可以访问该成员。
    - static函数里不能访问非静态成员